!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";n.r(t);const o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("autoplay",!0),o.setAttribute("loop",!0);var r=o;const i=new THREE.Scene,c=window.innerWidth,a=window.innerHeight;let l=0;const s=new THREE.Camera;s.position.z=1;const u=new THREE.VideoTexture(r);u.minFilter=THREE.LinearFilter,u.magFilter=THREE.LinearFilter,u.format=THREE.RGBFormat;const d=new THREE.WebGLRenderer;d.setPixelRatio(window.devicePixelRatio),d.setSize(c,a),document.body.appendChild(d.domElement);const m=new THREE.PlaneGeometry(c,a),f=new THREE.ShaderMaterial({uniforms:{texture:{type:"1i",value:u},time:{type:"1f",value:0}},vertexShader:"\n    varying vec2 textureCoords;\n\n    void main(void) {\n      textureCoords = vec2((position + 1.0) * 0.5);\n      gl_Position = vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    uniform sampler2D texture;\n    uniform float time;\n    varying vec2 textureCoords;\n\n    float rand(vec2 co){\n      return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n\n    void main (void) {\n      vec4 color = texture2D(texture, textureCoords);\n      color.rgb += sin(textureCoords.x * 900.0) * 0.15;\n      color.rgb += sin(textureCoords.y * 900.0) * 0.15;\n      float noise2 = rand(vec2(0.6, 0.8) * sin(time * 2.0)/ 2.0);\n      gl_FragColor = mix( vec4(noise2, 0.0, 0.0, 1.0), vec4(color.r, 0.0, 0.0, 1.0), 0.8);\n    }\n  "}),v=new THREE.Mesh(m,f);i.add(v),i.add(s);const g=()=>{requestAnimationFrame(g),l+=1,f.uniforms.time.value=l,d.render(i,s)};var x=g;const w=new(window.AudioContext||window.webkitAudioContext),y=w.createAnalyser();y.minDecibels=-110,y.maxDecibels=-20,y.smoothingTimeConstant=.45;const p=document.querySelector(".game__ui"),b=p.getContext("2d");p.setAttribute("width",180);const E=p.width,R=p.height;navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(e=>{r.srcObject=e,w.createMediaStreamSource(e).connect(y),y.connect(w.destination),function(){y.fftSize=128;const e=y.frequencyBinCount,t=new Uint8Array(e);b.clearRect(0,0,E,R/2);const n=()=>{requestAnimationFrame(n),y.getByteFrequencyData(t),b.fillStyle="rgb(0, 0, 0)",b.fillRect(0,0,E,R/2),b.clearRect(0,0,E,R/2);const o=E/e*1.5;let r,i=0;for(let n=0;n<e;n+=1)r=t[n],b.fillStyle=`rgb(${r+200}, 255, 255)`,b.fillRect(i,R/2-r/2,o,r),i+=o+1};n(),y.fftSize=1024;const o=y.fftSize,r=new Uint8Array(o);b.clearRect(0,R/2,E,R);const i=()=>{requestAnimationFrame(i),y.getByteTimeDomainData(r),b.fillStyle="rgb(200, 200, 200)",b.fillRect(0,R/2,E,R),b.clearRect(0,R/2,E,R),b.lineWidth=2,b.strokeStyle="rgb(255, 255, 255)",b.beginPath();const e=1.3*E/o;let t=0;for(let n=0;n<o;n+=1){const o=r[n]/32*(R/4)-30;0===n?b.moveTo(t,o):b.lineTo(t,o),t+=e}b.lineTo(p.width,p.height),b.stroke()};i()}()}).catch(e=>{console.log(`${e.name}: ${e.message}`)}),x()},function(e,t){},function(e,t,n){n(0),e.exports=n(1)}]);
//# sourceMappingURL=bundle.js.map